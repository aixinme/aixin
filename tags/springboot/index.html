<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Springboot | Aixin.me</title>
<meta name=keywords content><meta name=description content="With love in your heart, you will meet your better self!"><meta name=author content><link rel=canonical href=https://aixin.me/tags/springboot/><link crossorigin=anonymous href=/assets/css/stylesheet.cd8076395155efdf80d11be657137e63492849d6672742afb75e511893606f22.css integrity="sha256-zYB2OVFV79+A0RvmVxN+Y0koSdZnJ0Kvt15RGJNgbyI=" rel="preload stylesheet" as=style><link rel=icon href=https://aixin.me/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://aixin.me/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://aixin.me/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://aixin.me/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://aixin.me/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://aixin.me/tags/springboot/index.xml><link rel=alternate hreflang=en href=https://aixin.me/tags/springboot/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css integrity=sha384-wcIxkf4k558AjM3Yz3BBFQUbk/zgIYC2R0QpeeYb+TwlBVMrlgLqwRjRtGZiK7ww crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js integrity=sha384-hIoBPJpTUs74ddyc4bFZSM1TVlQDA60VBbJS0oA934VSz82sBx1X7kSx2ATBDIyd crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js integrity=sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})})</script><meta property="og:url" content="https://aixin.me/tags/springboot/"><meta property="og:site_name" content="Aixin.me"><meta property="og:title" content="Springboot"><meta property="og:description" content="With love in your heart, you will meet your better self!"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Springboot"><meta name=twitter:description content="With love in your heart, you will meet your better self!"></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://aixin.me/ accesskey=h title="Aixin.me (Alt + H)">Aixin.me</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://aixin.me/about/ title=About><span>About</span></a></li><li><a href=https://aixin.me/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://aixin.me/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://aixin.me/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://aixin.me/>Home</a>&nbsp;»&nbsp;<a href=https://aixin.me/tags/>Tags</a></div><h1>Springboot
<a href=/tags/springboot/index.xml title=RSS aria-label=RSS><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="23"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Springboot 异步方法</h2></header><div class=entry-content><p>异步调用应用场景 在SpringBoot的日常开发中，一般都是同步调用的。但实际中有很多场景非常适合使用异步来处理，如：注册新用户，送100个积分；或下单成功，发送push消息等等。
就拿注册新用户这个用例来说，为什么要异步处理？
第一个原因：容错性、健壮性，如果送积分出现异常，不能因为送积分而导致用户注册失败；
因为用户注册是主要功能，送积分是次要功能，即使送积分异常也要提示用户注册成功，然后后面在针对积分异常做补偿处理。
第二个原因：提升性能，例如注册用户花了20毫秒，送积分花费50毫秒，如果用同步的话，总耗时70毫秒，用异步的话，无需等待积分，故耗时20毫秒。
异步能解决2个问题：性能和容错性。
实现异步调用 Springboot3提供了@Async注解,只需要在方法上标注此注解，此方法即可实现异步调用。
也可以通过@EnableAsync注解开启异步功能，或者在配置类上添加@EnableAsync注解开启异步功能。
@EnableAsync注解可以直接放在SpringBoot启动类上，也可以单独放在其他配置类上
第一步：@EnableAsync放在启动类上 1 2 3 4 5 6 7 @SpringBootApplication @EnableAsync // 开启异步支持 public class YourApplication { public static void main(String[] args) { SpringApplication.run(YourApplication.class, args); } } 第二步：@EnableAsync放在配置类上 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 @Configuration @EnableAsync // 开启异步支持 public class AsyncConfig implements AsyncConfigurer { @Bean(name = "asyncExecutor") @Override public Executor getAsyncExecutor() { ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor(); executor.setCorePoolSize(10); // 核心线程数 executor.setMaxPoolSize(20); // 最大线程数 executor.setQueueCapacity(100); // 队列容量 executor.setThreadNamePrefix("Async-"); // 线程名前缀 executor.initialize(); return executor; } } 第三步：创建异步方法 在需要异步执行的方法上添加@Async注解，并指定执行器名称
...</p></div><footer class=entry-footer><span title='2025-06-12 14:58:22 +0800 CST'>2025-06-12</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;359 words</footer><a class=entry-link aria-label="post link to Springboot 异步方法" href=https://aixin.me/post/springboot-async/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Springboot Jwt</h2></header><div class=entry-content><p>安装JWT依赖 1 2 3 4 5 &lt;dependency> &lt;groupId>com.auth0&lt;/groupId> &lt;artifactId>java-jwt&lt;/artifactId> &lt;version>4.5.0&lt;/version> &lt;/dependency> 定义Jwt工具类 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 package com.example.demo.utils; import com.auth0.jwt.JWT; import com.auth0.jwt.algorithms.Algorithm; import com.auth0.jwt.exceptions.JWTVerificationException; import com.auth0.jwt.exceptions.SignatureVerificationException; import com.auth0.jwt.exceptions.TokenExpiredException; import com.auth0.jwt.interfaces.DecodedJWT; import com.auth0.jwt.interfaces.JWTVerifier; import org.springframework.stereotype.Component; import java.util.Collections; import java.util.Date; import java.util.Map; @Component public class JwtUtils { private static final String SECRET_KEY = "Pxiv0oevyL8rT3an11QKL208vYlkvAmt"; private static final String ISSUER = "admin_service"; private static final long EXPIRATION_TIME = 3600000; public static String generateToken(Map&lt;String, Object> claims) { // 定义密钥 Algorithm algorithm = Algorithm.HMAC256(SECRET_KEY); // 获取当前时间 Date now = new Date(); // 设置过期时间 Date expiration = new Date(now.getTime() + EXPIRATION_TIME); // 构建JWT并添加所有自定义claim com.auth0.jwt.JWTCreator.Builder tokenBuilder = JWT.create() .withIssuer(ISSUER) .withIssuedAt(now) .withExpiresAt(expiration); // 遍历添加每个自定义claim if (claims != null && !claims.isEmpty()) { for (Map.Entry&lt;String, Object> entry : claims.entrySet()) { String key = entry.getKey(); Object value = entry.getValue(); // 根据值类型选择对应的 withClaim 方法重载 if (value instanceof String) { tokenBuilder.withClaim(key, (String) value); } else if (value instanceof Integer) { tokenBuilder.withClaim(key, (Integer) value); } else if (value instanceof Long) { tokenBuilder.withClaim(key, (Long) value); } else if (value instanceof Boolean) { tokenBuilder.withClaim(key, (Boolean) value); } else if (value instanceof Double) { tokenBuilder.withClaim(key, (Double) value); } else if (value instanceof Float) { tokenBuilder.withClaim(key, Collections.singletonList((Float) value)); } else if (value instanceof Short) { tokenBuilder.withClaim(key, Collections.singletonList((Short) value)); } else if (value instanceof Byte) { tokenBuilder.withClaim(key, Collections.singletonList((Byte) value)); } else if (value instanceof Enum&lt;?>) { tokenBuilder.withClaim(key, (Map&lt;String, ?>) value); } } } return tokenBuilder.sign(algorithm); } public static Object validateToken(String token) { try { Algorithm algorithm = Algorithm.HMAC256(SECRET_KEY); JWTVerifier verifier = JWT.require(algorithm) .withIssuer(ISSUER) .build(); DecodedJWT jwt = verifier.verify(token); return "success"; } catch (SignatureVerificationException e) { return "签名验证失败"; } catch (TokenExpiredException e) { return "Token已过期"; } catch (JWTVerificationException e) { return e.getLocalizedMessage(); } } } 定义JwtInterceptor 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 package com.example.demo.config; import cn.hutool.json.JSONUtil; import com.example.demo.utils.JwtUtils; import org.springframework.web.servlet.HandlerInterceptor; import javax.servlet.http.HttpServletRequest; import javax.servlet.http.HttpServletResponse; public class JwtInterceptor implements HandlerInterceptor { @Override public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception { String token = request.getHeader("Authorization"); if (token == null || "".equals(token)) { response.setCharacterEncoding("UTF-8"); response.getWriter().write(JSONUtil.toJsonStr("未登录")); return false; } Object result = JwtUtils.validateToken(token); if ("success".equals(result)) { return true; } else { response.setCharacterEncoding("UTF-8"); response.getWriter().write(JSONUtil.toJsonStr(result)); return false; } } } 配置拦截器 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 package com.example.demo.config; import org.springframework.context.annotation.Configuration; import org.springframework.web.servlet.config.annotation.InterceptorRegistry; import org.springframework.web.servlet.config.annotation.WebMvcConfigurer; @Configuration public class WebAppConfig implements WebMvcConfigurer { @Override public void addInterceptors(InterceptorRegistry registry) { registry.addInterceptor(new JwtInterceptor()) .addPathPatterns("/**") // 拦截所有请求，可根据实际需求调整路径模式 .excludePathPatterns("/login"); // 排除登录接口 } } 使用JWT生成Token 1 2 3 4 5 6 7 Map&lt;String, Object> claims = new HashMap&lt;>(); claims.put("userId", userId); claims.put("username", username); // 其他自定义claim... String token = JwtUtils.generateToken(claims); return JSONUtil.toJsonStr(token); 这样你就完成了Spring Boot项目中JWT的集成和使用。记得根据你的项目实际情况对代码进行适当修改和扩展。
...</p></div><footer class=entry-footer><span title='2025-04-30 17:06:13 +0800 CST'>2025-04-30</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;525 words</footer><a class=entry-link aria-label="post link to Springboot Jwt" href=https://aixin.me/post/springboot-jwt/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Springboot Response</h2></header><div class=entry-content><p>1. 创建HTTP状态码枚举 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 package com.example.demo.utils; import lombok.Getter; @Getter public enum HttpStatusEnum { /** * 操作成功 */ SUCCESS(200, "操作成功"), /** * 对象创建成功 */ CREATED(201, "对象创建成功"), /** * 请求已经被接受 */ ACCEPTED(202, "请求已经被接受"), /** * 操作已经执行成功，但是没有返回数据 */ NO_CONTENT(204, "操作已经执行成功，但是没有返回数据"), /** * 资源已被移除 */ MOVED_PERM(301, "资源已被移除"), /** * 重定向 */ SEE_OTHER(303, "重定向"), /** * 资源没有被修改 */ NOT_MODIFIED(304, "资源没有被修改"), /** * 参数列表错误（缺少，格式不匹配） */ BAD_REQUEST(400, "参数列表错误（缺少，格式不匹配）"), /** * 未授权 */ UNAUTHORIZED(401, "未授权"), /** * 访问受限，授权过期 */ FORBIDDEN(403, "访问受限，授权过期"), /** * 资源，服务未找到 */ NOT_FOUND(404, "资源，服务未找！"), /** * 不允许的http方法 */ BAD_METHOD(405, "不允许的http方法"), /** * 资源冲突，或者资源被锁 */ CONFLICT(409, "资源冲突，或者资源被锁"), /** * 不支持的数据，媒体类型 */ UNSUPPORTED_TYPE(415, "不支持的数据，媒体类型"), /** * 系统内部错误 */ ERROR(500, "系统内部错误"), /** * 接口未实现 */ NOT_IMPLEMENTED(501, "接口未实现"), /** * 系统警告消息 */ WARN(601,"系统警告消息"); private final Integer code; private final String message; HttpStatusEnum(Integer code, String message) { this.code = code; this.message = message; } } 2. 创建通用返回类 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 package com.example.demo.utils; import lombok.AllArgsConstructor; import lombok.Data; import lombok.NoArgsConstructor; @Data @AllArgsConstructor @NoArgsConstructor public class ResponseResult&lt;T> { /*状态码*/ private Integer code; /*状态信息*/ private Boolean status; /*返回信息*/ private String message; /*返回数据*/ private T data; /** * 全参数方法 * * @param code 状态码 * @param status 状态 * @param message 返回信息 * @param data 返回数据 * @param &lt;T> 泛型 * @return {@link ResponseResult&lt;T>} */ private static &lt;T> ResponseResult&lt;T> response(Integer code, Boolean status, String message, T data) { ResponseResult&lt;T> responseResult = new ResponseResult&lt;>(); responseResult.setCode(code); responseResult.setStatus(status); responseResult.setMessage(message); responseResult.setData(data); return responseResult; } /** * 全参数方法 * * @param code 状态码 * @param status 状态 * @param message 返回信息 * @param &lt;T> 泛型 * @return {@link ResponseResult&lt;T>} */ private static &lt;T> ResponseResult&lt;T> response(Integer code, Boolean status, String message) { ResponseResult&lt;T> responseResult = new ResponseResult&lt;>(); responseResult.setCode(code); responseResult.setStatus(status); responseResult.setMessage(message); return responseResult; } /** * 成功返回（无参） * * @param &lt;T> 泛型 * @return {@link ResponseResult&lt;T>} */ public static &lt;T> ResponseResult&lt;T> success() { return response(HttpStatusEnum.SUCCESS.getCode(), true, HttpStatusEnum.SUCCESS.getMessage(), null); } /** * 成功返回（枚举参数） * * @param httpResponseEnum 枚举参数 * @param &lt;T> 泛型 * @return {@link ResponseResult&lt;T>} */ public static &lt;T> ResponseResult&lt;T> success(HttpStatusEnum httpResponseEnum) { return response(httpResponseEnum.getCode(), true, httpResponseEnum.getMessage()); } /** * 成功返回（状态码+返回信息） * * @param code 状态码 * @param message 返回信息 * @param &lt;T> 泛型 * @return {@link ResponseResult&lt;T>} */ public static &lt;T> ResponseResult&lt;T> success(Integer code, String message) { return response(code, true, message); } /** * 成功返回（返回信息 + 数据） * * @param message 返回信息 * @param data 数据 * @param &lt;T> 泛型 * @return {@link ResponseResult&lt;T>} */ public static &lt;T> ResponseResult&lt;T> success(String message, T data) { return response(HttpStatusEnum.SUCCESS.getCode(), true, message, data); } /** * 成功返回（状态码+返回信息+数据） * * @param code 状态码 * @param message 返回信息 * @param data 数据 * @param &lt;T> 泛型 * @return {@link ResponseResult&lt;T>} */ public static &lt;T> ResponseResult&lt;T> success(Integer code, String message, T data) { return response(code, true, message, data); } /** * 成功返回（数据） * * @param data 数据 * @param &lt;T> 泛型 * @return {@link ResponseResult&lt;T>} */ public static &lt;T> ResponseResult&lt;T> success(T data) { return response(HttpStatusEnum.SUCCESS.getCode(), true, HttpStatusEnum.SUCCESS.getMessage(), data); } /** * 成功返回（返回信息） * * @param message 返回信息 * @param &lt;T> 泛型 * @return {@link ResponseResult&lt;T>} */ public static &lt;T> ResponseResult&lt;T> success(String message) { return response(HttpStatusEnum.SUCCESS.getCode(), true, message, null); } /** * 失败返回（无参） * * @param &lt;T> 泛型 * @return {@link ResponseResult&lt;T>} */ public static &lt;T> ResponseResult&lt;T> fail() { return response(HttpStatusEnum.ERROR.getCode(), false, HttpStatusEnum.ERROR.getMessage(), null); } /** * 失败返回（枚举） * * @param httpResponseEnum 枚举 * @param &lt;T> 泛型 * @return {@link ResponseResult&lt;T>} */ public static &lt;T> ResponseResult&lt;T> fail(HttpStatusEnum httpResponseEnum) { return response(httpResponseEnum.getCode(), false, httpResponseEnum.getMessage()); } /** * 失败返回（状态码+返回信息） * * @param code 状态码 * @param message 返回信息 * @param &lt;T> 泛型 * @return {@link ResponseResult&lt;T>} */ public static &lt;T> ResponseResult&lt;T> fail(Integer code, String message) { return response(code, false, message); } /** * 失败返回（返回信息+数据） * * @param message 返回信息 * @param data 数据 * @param &lt;T> 泛型 * @return {@link ResponseResult&lt;T>} */ public static &lt;T> ResponseResult&lt;T> fail(String message, T data) { return response(HttpStatusEnum.ERROR.getCode(), false, message, data); } /** * 失败返回（状态码+返回信息+数据） * * @param code 状态码 * @param message 返回消息 * @param data 数据 * @param &lt;T> 泛型 * @return {@link ResponseResult&lt;T>} */ public static &lt;T> ResponseResult&lt;T> fail(Integer code, String message, T data) { return response(code, false, message, data); } /** * 失败返回（数据） * * @param data 数据 * @param &lt;T> 泛型 * @return {@link ResponseResult&lt;T>} */ public static &lt;T> ResponseResult&lt;T> fail(T data) { return response(HttpStatusEnum.ERROR.getCode(), false, HttpStatusEnum.ERROR.getMessage(), data); } /** * 失败返回（返回信息） * * @param message 返回信息 * @param &lt;T> 泛型 * @return {@link ResponseResult&lt;T>} */ public static &lt;T> ResponseResult&lt;T> fail(String message) { return response(HttpStatusEnum.ERROR.getCode(), false, message, null); } } 3. 使用示例 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 package com.example.demo.controller; import com.example.demo.utils.ResponseResult; @RequestMapping("") public class Hello { @GetMapping("/success") public ResponseResult&lt;String> success() { return ResponseResult.success("操作成功"); } @GetMapping("/fail") public ResponseResult&lt;String> fail() { return ResponseResult.fail(HttpStatusEnum.PARAM_ERROR); } }</p></div><footer class=entry-footer><span title='2025-04-30 17:05:59 +0800 CST'>2025-04-30</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;1101 words</footer><a class=entry-link aria-label="post link to Springboot Response" href=https://aixin.me/post/springboot-response/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Springboot使用Sentinel实现流量控制与熔断降级</h2></header><div class=entry-content><p>1、安装Sentinel 1 2 3 4 5 &lt;dependency> &lt;groupId>com.alibaba.csp&lt;/groupId> &lt;artifactId>sentinel-core&lt;/artifactId> &lt;version>1.8.8&lt;/version> &lt;/dependency></p></div><footer class=entry-footer><span title='2025-04-30 13:51:57 +0800 CST'>2025-04-30</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;11 words</footer><a class=entry-link aria-label="post link to Springboot使用Sentinel实现流量控制与熔断降级" href=https://aixin.me/post/springboot-sentinel/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Springboot上传图片</h2></header><div class=entry-content><p>在 Spring Boot 3 中，要实现限制上传图片尺寸、格式以及对图片进行裁剪压缩处理，可以按照以下步骤进行。下面是一个完整的示例代码：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 import org.springframework.http.HttpStatus; import org.springframework.http.ResponseEntity; import org.springframework.web.bind.annotation.PostMapping; import org.springframework.web.bind.annotation.RequestParam; import org.springframework.web.bind.annotation.RestController; import org.springframework.web.multipart.MultipartFile; import javax.imageio.ImageIO; import java.awt.*; import java.awt.image.BufferedImage; import java.io.File; import java.io.IOException; import java.nio.file.Files; import java.nio.file.Path; import java.nio.file.Paths; import java.nio.file.StandardCopyOption; @RestController public class ImageUploadController { private static final String UPLOAD_DIR = "uploads"; private static final String[] ALLOWED_TYPES = {"image/jpeg", "image/png", "image/gif"}; private static final int MAX_WIDTH = 1920; private static final int MAX_HEIGHT = 1080; private static final int TARGET_WIDTH = 800; private static final int TARGET_HEIGHT = 600; @PostMapping("/upload") public ResponseEntity&lt;String> uploadImage(@RequestParam("image") MultipartFile file) { if (file.isEmpty()) { return new ResponseEntity&lt;>("请选择要上传的图片", HttpStatus.BAD_REQUEST); } // 检查文件类型 String contentType = file.getContentType(); boolean isAllowed = false; for (String allowedType : ALLOWED_TYPES) { if (allowedType.equals(contentType)) { isAllowed = true; break; } } if (!isAllowed) { return new ResponseEntity&lt;>("不支持的文件类型，仅支持 JPEG、PNG 和 GIF 格式", HttpStatus.BAD_REQUEST); } try { BufferedImage image = ImageIO.read(file.getInputStream()); int width = image.getWidth(); int height = image.getHeight(); // 检查图片尺寸 if (width > MAX_WIDTH || height > MAX_HEIGHT) { return new ResponseEntity&lt;>("图片尺寸过大，最大宽度为 " + MAX_WIDTH + "，最大高度为 " + MAX_HEIGHT, HttpStatus.BAD_REQUEST); } // 裁剪和压缩图片 BufferedImage resizedImage = resizeImage(image, TARGET_WIDTH, TARGET_HEIGHT); // 创建上传目录（如果不存在） File uploadDir = new File(UPLOAD_DIR); if (!uploadDir.exists()) { uploadDir.mkdirs(); } // 获取文件名 String fileName = file.getOriginalFilename(); Path filePath = Paths.get(UPLOAD_DIR, fileName); // 保存处理后的图片 String format = contentType.split("/")[1]; ImageIO.write(resizedImage, format, filePath.toFile()); return new ResponseEntity&lt;>("图片上传并处理成功", HttpStatus.OK); } catch (IOException e) { e.printStackTrace(); return new ResponseEntity&lt;>("图片上传失败", HttpStatus.INTERNAL_SERVER_ERROR); } } private BufferedImage resizeImage(BufferedImage originalImage, int targetWidth, int targetHeight) { BufferedImage resizedImage = new BufferedImage(targetWidth, targetHeight, BufferedImage.TYPE_INT_RGB); Graphics2D graphics2D = resizedImage.createGraphics(); graphics2D.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR); graphics2D.drawImage(originalImage, 0, 0, targetWidth, targetHeight, null); graphics2D.dispose(); return resizedImage; } } 代码说明 文件类型限制： ALLOWED_TYPES 数组定义了允许上传的图片格式，在 uploadImage 方法中，通过 file.getContentType() 获取文件的 MIME 类型，并与 ALLOWED_TYPES 进行比较，若不匹配则返回错误信息。 图片尺寸限制： MAX_WIDTH 和 MAX_HEIGHT 定义了允许上传的最大图片尺寸。在 uploadImage 方法中，使用 ImageIO.read 读取图片文件为 BufferedImage 对象，然后获取其宽度和高度，若超过最大尺寸则返回错误信息。 图片裁剪压缩处理： TARGET_WIDTH 和 TARGET_HEIGHT 定义了处理后图片的目标尺寸。resizeImage 方法用于将原始图片按照目标尺寸进行裁剪和压缩，使用 Graphics2D 进行绘制，最后返回处理后的 BufferedImage 对象。 在 uploadImage 方法中，调用 resizeImage 方法对图片进行处理，然后使用 ImageIO.write 将处理后的图片保存到指定目录。</p></div><footer class=entry-footer><span title='2025-04-25 14:52:45 +0800 CST'>2025-04-25</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;393 words</footer><a class=entry-link aria-label="post link to Springboot上传图片" href=https://aixin.me/post/springboot-upload-images/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Springboot使用Redisson分布式锁</h2></header><div class=entry-content><p>在 Spring Boot 项目里，运用 Redisson 实现分布式锁来处理销售扣减库存和入库增加库存，且同时操作一个库存值，可按以下步骤完成：
1、添加依赖 在pom.xml文件里添加 Redisson 和 Spring Boot Data Redis 的依赖：
1 2 3 4 5 6 7 8 9 10 11 12 13 &lt;dependencies> &lt;!-- Redisson --> &lt;dependency> &lt;groupId>org.redisson&lt;/groupId> &lt;artifactId>redisson-spring-boot-starter&lt;/artifactId> &lt;version>3.16.2&lt;/version> &lt;/dependency> &lt;!-- Spring Boot Data Redis --> &lt;dependency> &lt;groupId>org.springframework.boot&lt;/groupId> &lt;artifactId>spring-boot-starter-data-redis&lt;/artifactId> &lt;/dependency> &lt;/dependencies> 2、配置 Redisson 在application.yml文件里配置 Redis：
1 2 3 4 spring: redis: host: localhost port: 6379 3、在service中使用 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 import org.redisson.api.RLock; import org.redisson.api.RedissonClient; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.stereotype.Service; import java.util.concurrent.TimeUnit; @Service public class InventoryService { @Autowired private RedissonClient redissonClient; // 库存键名 private static final String INVENTORY_KEY = "product:inventory:1"; /** * 销售扣减库存 * @param quantity 扣减数量 * @return 是否成功 */ public boolean deductInventory(int quantity) { // 获取分布式锁 RLock lock = redissonClient.getLock(INVENTORY_KEY); try { // 尝试加锁，等待10秒，自动释放锁时间为30秒 if (lock.tryLock(10, 30, TimeUnit.SECONDS)) { // 模拟从Redis获取当前库存 Integer currentInventory = getInventoryFromRedis(); if (currentInventory != null && currentInventory >= quantity) { // 扣减库存 int newInventory = currentInventory - quantity; // 更新Redis中的库存 updateInventoryInRedis(newInventory); return true; } } } catch (InterruptedException e) { Thread.currentThread().interrupt(); } finally { // 释放锁 if (lock.isHeldByCurrentThread()) { lock.unlock(); } } return false; } /** * 入库增加库存 * @param quantity 增加数量 */ public void addInventory(int quantity) { // 获取分布式锁 RLock lock = redissonClient.getLock(INVENTORY_KEY); try { // 尝试加锁，等待10秒，自动释放锁时间为30秒 if (lock.tryLock(10, 30, TimeUnit.SECONDS)) { // 模拟从Redis获取当前库存 Integer currentInventory = getInventoryFromRedis(); if (currentInventory != null) { // 增加库存 int newInventory = currentInventory + quantity; // 更新Redis中的库存 updateInventoryInRedis(newInventory); } } } catch (InterruptedException e) { Thread.currentThread().interrupt(); } finally { // 释放锁 if (lock.isHeldByCurrentThread()) { lock.unlock(); } } } /** * 从Redis获取当前库存 * @return 当前库存 */ private Integer getInventoryFromRedis() { // 这里需要根据实际情况实现从Redis获取库存的逻辑 return 100; } /** * 更新Redis中的库存 * @param newInventory 新的库存数量 */ private void updateInventoryInRedis(int newInventory) { // 这里需要根据实际情况实现更新Redis库存的逻辑 } } 代码解释
...</p></div><footer class=entry-footer><span title='2025-04-25 14:34:45 +0800 CST'>2025-04-25</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;446 words</footer><a class=entry-link aria-label="post link to Springboot使用Redisson分布式锁" href=https://aixin.me/post/springboot-redisson/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Spring boot 限流</h2></header><div class=entry-content><p>在 Spring Boot 3 中实现限流可以采用多种方式，下面为你介绍常见的三种：
1、使用 Sentinel 实现限流 Sentinel 是阿里巴巴开源的一款流量控制组件，具备实时监控、限流、熔断等功能。
步骤
添加依赖：在pom.xml里添加 Sentinel 的依赖。
1 2 3 4 5 &lt;dependency> &lt;groupId>com.alibaba.csp&lt;/groupId> &lt;artifactId>sentinel-spring-boot-starter&lt;/artifactId> &lt;version>1.8.6&lt;/version> &lt;/dependency> 配置规则：创建一个配置类来设置限流规则。
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 import com.alibaba.csp.sentinel.slots.block.RuleConstant; import com.alibaba.csp.sentinel.slots.block.flow.FlowRule; import com.alibaba.csp.sentinel.slots.block.flow.FlowRuleManager; import org.springframework.context.annotation.Configuration; import javax.annotation.PostConstruct; import java.util.ArrayList; import java.util.List; @Configuration public class SentinelConfig { @PostConstruct public void initFlowRules() { List&lt;FlowRule> rules = new ArrayList&lt;>(); FlowRule rule = new FlowRule(); rule.setResource("yourResourceName"); rule.setCount(10); // 每秒最多允许10个请求 rule.setGrade(RuleConstant.FLOW_GRADE_QPS); rule.setLimitApp("default"); rules.add(rule); FlowRuleManager.loadRules(rules); } } 添加注解：在需要限流的方法上添加@SentinelResource注解。
...</p></div><footer class=entry-footer><span title='2025-04-25 14:21:48 +0800 CST'>2025-04-25</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;369 words</footer><a class=entry-link aria-label="post link to Spring boot 限流" href=https://aixin.me/post/springboot-rate-limiting/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Springboot：Lombok</h2></header><div class=entry-content><p>简介 Lombok 是一个 Java 库，它可以自动插入编辑器和构建工具中，简化 Java 代码的编写。 Lombok 提供了一系列注解，用于自动生成 getter、setter、构造函数、toString 方法等，从而减少了代码量，提高了代码的可读性和可维护性。
安装 1 2 3 4 5 &lt;dependency> &lt;groupId>org.projectlombok&lt;/groupId> &lt;artifactId>lombok&lt;/artifactId> &lt;version>1.18.28&lt;/version> &lt;/dependency> 常用注解 注解名 作用 @Data 自动生成 getter、setter、toString、equals、hashCode 方法 @Getter 自动生成 getter 方法 @Setter 自动生成 setter 方法 @ToString 自动生成 toString 方法 @EqualsAndHashCode 自动生成 equals 和 hashCode 方法 @NoArgsConstructor 自动生成无参构造函数 @AllArgsConstructor 自动生成全参构造函数 全部注解 @Data @Data注解是一个非常强大的综合注解，它等价于同时使用@ToString、@EqualsAndHashCode、@Getter、@Setter和@RequiredArgsConstructor。使用@Data可以大大简化代码，减少样板代码的编写。
1 2 3 4 5 6 import lombok.Data; @Data public class Person { private String name; private int age; } @Getter和@Setter 1. 放置位置的灵活性
...</p></div><footer class=entry-footer><span title='2025-03-12 14:16:07 +0800 CST'>2025-03-12</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;1640 words</footer><a class=entry-link aria-label="post link to Springboot：Lombok" href=https://aixin.me/post/springboot-lombok/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Springboot：输出嵌套数据</h2></header><div class=entry-content><p>实体类 1 2 3 4 5 6 7 8 9 10 11 12 @Getter @Setter @AllArgsConstructor @NoArgsConstructor @Entity @TableName("t_article") public class Article { private Long id; private String title; private String content; private Long parentId; } DTO类 1 2 3 4 5 6 7 @Data public class ArticleDTO { private Long id; private String title; private String content; private List&lt;ArticleDTO> children;//这是重点 } Service类 1 2 3 public interface ArticleService { List&lt;ArticleDTO> getArticleList(); } ServiceImpl类 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 @Service public class ArticleServiceImpl implements ArticleService { @Autowired private ArticleMapper articleMapper; @Override public List&lt;ArticleDTO> getArticleList() { // 查询所有文章 List&lt;Article> articles = ArticleRepository.searchQuery(); Map&lt;String, ArticleResDto> articleMap = new HashMap&lt;>(); List&lt;ArticleResDto> rootArticles = new ArrayList&lt;>(); // 遍历所有文章，将其转换为ArticleResDto对象，并存储在articleMap中 // 这一步很重要，否则下一步for循环可能无法找到父节点导致数据丢失 for (Article article : articles) { ArticleResDto articleResDto = new ArticleResDto(); //将文章属性复制到文章DTO对象中对应属性中（两边属性字段必须相同，不相同的可以单独通过set方法赋值） BeanUtils.copyProperties(article, articleResDto); articleMap.put(article.getCode(), articleResDto); } // 遍历所有文章，将其转换为ArticleResDto对象，并存储在rootArticles中 for (Article article : articles) { // 从articleMap中获取对应的ArticleResDto对象 ArticleResDto articleResDto = articleMap.get(article.getCode()); // 如果该文章的parent为0，则将其作为根节点存储在rootArticles中 if (article.getParent().equals("0")) { rootArticles.add(articleResDto); } else { // 如果该文章的parent不为0，则将其作为子节点存储在对应的父节点的children中 ArticleResDto parentarticle = articleMap.get(article.getParent()); if (parentarticle != null) { // 如果父节点的children为null，则创建一个新的List对象 if (parentarticle.getChildren() == null) { parentarticle.setChildren(new ArrayList&lt;>()); } parentarticle.getChildren().add(articleResDto); } } } return rootArticles; } // 返回顶级文章列表 /** * 输出结果： * [ * { * "id": 1, * "title": "文章1", * "content": "文章1的内容", * "children": [ * { * "id": 2, * "title": "文章2", * "content": "文章2的内容", * "children": [] * } * ] * } * ] */ return articleDTOs; } BeanUtils.copyProperties(article, articleDTO);将文章属性复制到文章DTO对象中对应属性中
...</p></div><footer class=entry-footer><span title='2025-03-11 17:12:03 +0800 CST'>2025-03-11</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;298 words</footer><a class=entry-link aria-label="post link to Springboot：输出嵌套数据" href=https://aixin.me/post/springboot-nested-data/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Spring Data JPA</h2></header><div class=entry-content><p>第一步： maven中添加JPA依赖
1 2 3 4 &lt;dependency> &lt;groupId>org.springframework.boot&lt;/groupId> &lt;artifactId>spring-boot-starter-data-jpa&lt;/artifactId> &lt;/dependency> 第二步（可选）： 安装IDEA插件 JPA Buddy，可以自动生成Entity实体类和Repository仓库接口
第三步： 创建数据表，比如：
1 2 3 4 5 6 7 8 CREATE TABLE `user` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) DEFAULT NULL, `password` varchar(255) DEFAULT NULL, `age` int(11) DEFAULT NULL, `created_time` timestamp NULL DEFAULT CURRENT_TIMESTAMP, PRIMARY KEY (`id`) ) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4; 第四步： 创建数据表对应实体类
项目下边创建entity软件包（文件夹）
方法1（推荐）：通过JPA Buddy插件创建，在entity上右键→新建→来自数据库的JPA实体，下边选择对应的数据表和字段，点击确认，就可以自动在entity下边创建对应的实体类了
...</p></div><footer class=entry-footer><span title='2025-03-10 23:02:18 +0800 CST'>2025-03-10</span>&nbsp;·&nbsp;12 min&nbsp;·&nbsp;2400 words</footer><a class=entry-link aria-label="post link to Spring Data JPA" href=https://aixin.me/post/spring-data-jpa/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://aixin.me/tags/springboot/page/2/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2025 <a href=https://aixin.me/>Aixin.me</a></span> ·</footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>